---
import MainLayout from "@/layouts/MainLayout.astro";
import MainPageTitle from "@/components/MainPageTitle/index.astro";
import { SEO } from "astro-seo";
import bgImage from "@/assets/images/conferences.png";
import EventSection from "@/components/Conferences/EventSection.astro";
import { getEventsCollection } from "@/lib/events";

const events = await getEventsCollection();

const eventWithPublicTalks = events.filter(
  (event) =>
    event.data.schedule?.status !== "preview" &&
    (event.data.schedule?.items ?? []).length > 0,
);
---

<MainLayout>
  <SEO
    slot="seo"
    title="Conferences"
    description="All the Fork it! conferences, from meetups to full-day events! Explore the talks, speakers, and highlights from all editions."
  />
  <MainPageTitle
    title="Conferences"
    subtitle="All the Fork it! conferences"
    imageSrc={bgImage}
  />
  <div class="mx-auto flex max-w-screen-lg px-4 pb-40">
    <div class="flex flex-col gap-16">
      {eventWithPublicTalks.map((event) => <EventSection event={event} />)}
    </div>
  </div>
</MainLayout>
