---
import { buttonVariants } from "@/components/ui/button";
import { cn } from "@/lib/utils-client";
import { MdArrowForward } from "react-icons/md";
import { Image } from "astro:assets";
import type { CollectionEntry } from "astro:content";

interface Props {
  afterMovie:
    | CollectionEntry<"events">
    | CollectionEntry<"forKidsEvent">
    | undefined;
  href: string;
  title: string;
  description: string;
  buttonText: string;
}

const { afterMovie, href, title, description, buttonText } = Astro.props;
---

<div
  class=`relative mx-auto flex max-w-screen-lg flex-col items-center justify-center gap-8 px-4  ${title === "What is Fork it! For Kids?" ? "md:flex-row-reverse" : "md:flex-row"} xl:justify-normal`
>
  <div class="relative flex w-full flex-1 flex-col gap-4 px-6 md:px-0">
    <h2
      class="text-balance font-heading text-3xl font-medium uppercase tracking-wide"
    >
      {title}
    </h2>
    <p class="max-w-[50ch] text-balance text-sm opacity-60">
      {description}
    </p>

    <a
      href={href}
      title={buttonText}
      class={cn(buttonVariants(), "group gap-2 xs:max-w-44 mt-4")}
    >
      {buttonText}
      <MdArrowForward className="transition group-hover:translate-x-1" />
    </a>
  </div>
  {
    afterMovie && afterMovie.data.afterEventContent?.afterMovie && (
      <div class="relative aspect-[1134/640] w-full min-w-0 flex-1">
        <a
          href={afterMovie.data.afterEventContent?.afterMovie?.href}
          target="_blank"
          rel="noreferrer"
        >
          <Image
            alt={
              afterMovie.data.afterEventContent?.afterMovie?.thumbnail?.alt ??
              "After movie preview"
            }
            class="rounded-lg object-cover"
            src={
              afterMovie.data.afterEventContent?.afterMovie?.thumbnail?.image
            }
            width={1134}
            height={640}
          />
        </a>
      </div>
    )
  }
</div>
